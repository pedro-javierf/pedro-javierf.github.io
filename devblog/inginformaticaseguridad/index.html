<!DOCTYPE html>
<html lang='en'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='The definite question about cybersecurity As a third year student of Computer Engineering at a known University in Madrid and an information secuirty enthusiast, I can&rsquo;t help but panic when the subject is taught incorrectly or misleadingly.
Needless to say, progress has been made in the last years. We have a course specifically designed to teach computer networks security. The university does not prosecute you if you find vulnerabilities in their systems, they know about responsive disclosure and acknowledge you instead.'>
<meta name='theme-color' content='#6aff00'>

<meta property='og:title' content='Is safe design being taught at Computer Engineering degrees? ‚Ä¢ Dangling Pointr'>
<meta property='og:description' content='The definite question about cybersecurity As a third year student of Computer Engineering at a known University in Madrid and an information secuirty enthusiast, I can&rsquo;t help but panic when the subject is taught incorrectly or misleadingly.
Needless to say, progress has been made in the last years. We have a course specifically designed to teach computer networks security. The university does not prosecute you if you find vulnerabilities in their systems, they know about responsive disclosure and acknowledge you instead.'>
<meta property='og:url' content='https://pedro-javierf.github.io/devblog/inginformaticaseguridad/'>
<meta property='og:site_name' content='Dangling Pointr'>
<meta property='og:type' content='article'><meta property='article:section' content='devblog'><meta property='article:published_time' content='2020-11-02T11:39:11&#43;02:00'/><meta property='article:modified_time' content='2020-11-02T11:39:11&#43;02:00'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.59.1" />

  <title>Is safe design being taught at Computer Engineering degrees? ‚Ä¢ Dangling Pointr</title>
  <link rel='canonical' href='https://pedro-javierf.github.io/devblog/inginformaticaseguridad/'>
  
  <link rel='alternate' hreflang='en' href='https://pedro-javierf.github.io/devblog/inginformaticaseguridad/'><link rel='alternate' hreflang='x-default' href='https://pedro-javierf.github.io/devblog/inginformaticaseguridad/'><link rel='alternate' hreflang='es' href='https://pedro-javierf.github.io/es/devblog/inginformaticaseguridad/'>
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.ab98e12b.css'><link rel='stylesheet' href='/css/custom.css'><style>
:root{--color-accent:#6aff00;}
</style>

  

</head>

<meta name="twitter:image:src" content="https://pedro-javierf.github.io/images/logo.png"> 
<script src="https://kit.fontawesome.com/4cb33814ad.js" crossorigin="anonymous"></script>

<script>var clicky_site_ids = clicky_site_ids || []; clicky_site_ids.push(101283254);</script>
<script async src="//static.getclicky.com/js"></script>

<link disabled id="dark-mode-theme" rel="stylesheet" href="/assets/css/dark.css">
<body class='page type-devblog has-sidebar'>

  <div class='site'><div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'>Skip to Main Menu</a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div class='logo'>
      <a href='/'>
        <img src='/images/logo.png'>
      </a>
    </div>
    
    <h2 class='title site-title '>
      <a href='/'>
      Dangling Pointr
      </a>
    </h2>
    <div class='desc'>
    Your blog about hacking, learning and tech
    </div>
  </header>

</section>
<section class='widget widget-sidebar_menu sep-after'><nav id='sidebar-menu' class='menu sidebar-menu' aria-label='Sidebar Menu'>
    <div class='container'>
      <ul><li class='item'>
  <a href='/'>Home</a></li><li class='item'>
  <a href='/devblog/'>Devblog üñ•Ô∏è</a></li><li class='item'>
  <a href='/talks/'>Talks üó£Ô∏è</a></li><li class='item'>
  <a href='/gaming/'>Entertainment üéÆ</a></li><li class='item'>
  <a href='/misc/'>Misc üéµ</a></li><li class='item'>
  <a href='/about/'>About</a></li></ul>
    </div>
  </nav>

</section>
  <a id="dark-mode-toggle">Dark Mode</a><br>
  
  
  </div>

  <div class='sidebar-overlay'></div>
</div><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    <a class='screen-reader-text' href='#content'>Skip to Content</a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'>Toggle Sidebar</span>
  <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
  <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
</button>
    <ul><li class='item'>
        <a href='/'>Home</a>
      </li><li class='item'>
        <a href='/devblog/'>Devblog üñ•Ô∏è</a>
      </li><li class='item'>
        <a href='/talks/'>Talks üó£Ô∏è</a>
      </li><li class='item'>
        <a href='/gaming/'>Entertainment üéÆ</a>
      </li><li class='item'>
        <a href='/misc/'>Misc üéµ</a>
      </li><li class='item'>
        <a href='/about/'>About</a>
      </li><li class='item'>
        <a href='/es/'><i class='fa fa-language'></i> Change Language</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>Dangling Pointr</p><p class='desc site-desc'>Your blog about hacking, learning and tech</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Is safe design being taught at Computer Engineering degrees?</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2020-11-02T11:39:11&#43;02:00'>2020, Nov 02</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
4 mins read
</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  

<h1 id="the-definite-question-about-cybersecurity">The definite question about cybersecurity</h1>

<p>As a third year student of Computer Engineering at a known University in Madrid and an information secuirty enthusiast, I can&rsquo;t help but <em>panic</em> when the subject is taught incorrectly or misleadingly.</p>

<p>Needless to say, progress has been made in the last years. We have a course specifically designed to teach computer networks security. The university does not prosecute you if you find vulnerabilities in their systems, they know about responsive disclosure and acknowledge you instead. And so on.</p>

<p>But when it comes to the average student of CS&hellip; can we say the whole degree makes them security-aware? What about secure programming?</p>

<h1 id="mytar-laboratory-1-study-case">mytar Laboratory 1: study case</h1>

<p>New academic year. I enroll in the Operating Systems subject. First laboratory practice. Here&rsquo;s the statement:</p>

<blockquote>
<p>In this assignment the student must create a command line tool called ‚Äúmytar‚Äù, this tool must be able to create a tarball archive containing several files, or to extract the files from a previously created tarball.</p>
</blockquote>

<p>After a couple of days I finish the task and submit it.</p>

<p>During the development of the tool I remembered how difficult it is to program in C: memory management, buffer overflow, among others. Most of my mates&rsquo; code have these problems from time to time. No surprise, we have just been introduced to C. <strong>First vulnerability found</strong>, the classic memory management vulnerabilities no-one teaches you about in the degree.</p>

<p>Nonetheless, if you happen to be a CTF player, you may have thought about vulnerabilities of a different nature.</p>

<blockquote>
<p><em>Does a name like Zip Slip hit home?</em></p>
</blockquote>

<p>Our program has a vulnerability that <strong>has been among us for almost 30 years</strong>. And that&rsquo;s simply because the specification of the .tar format in our Lab script, even simplified to an extrem, still <strong>does not take safety into account</strong>.</p>

<p>Here&rsquo;s an snippet from my code, and a hint. Our mytar program does not check nor sanitize the path of the file it is going to extract.
Can you spot the problem?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">//Open the file to extract
</span><span style="color:#75715e"></span>FILE <span style="color:#f92672">*</span>subfile <span style="color:#f92672">=</span> fopen(descriptorList[i].name,<span style="color:#e6db74">&#34;wb&#34;</span>);

<span style="color:#75715e">//Extract the contents to the file
</span><span style="color:#75715e"></span>copynFile(tarfile, subfile, descriptorList[i].size);

<span style="color:#75715e">//Close the file
</span><span style="color:#75715e"></span>fclose(subfile);</code></pre></div>
<p>In the first line we use the filename or path, that is found on the .tar file, to create the extracted file in the system.</p>

<p>What would occur if our .tar file is malicious and contains the following path to extract?</p>

<blockquote>
<p>../../../../var/www/index.html</p>
</blockquote>

<p>Let&rsquo;s tear down this path string. Firstly we have the following:</p>

<blockquote>
<p>../../../../</p>
</blockquote>

<p>Which when working with filesystems, in essence moves to the parent directory. In this case, 4 times.</p>

<blockquote>
<p>/var/www/index.html</p>
</blockquote>

<p>Next, the file is writen to the give directory, but starting from the root directory <code>/</code> if we have gone upwards in the filesystem tree.
We&rsquo;d be executing something like the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fopen(<span style="color:#e6db74">&#34;../../../../var/www/index.html&#34;</span>,<span style="color:#e6db74">&#34;wb&#34;</span>);
</code></pre></div>
<p>Linux servers, specially web servers, usually have the data of the web server in the <code>/var/www/</code> path. Uncompressing the malicious .tar would overwrite the index.html in the filesystem, with the malicious file provided by the attacker (which could then deface the web, execute javascript in the users&rsquo; browsers, etc).</p>

<p><center>
<img src=img/tar.PNG><br>
Malformed .tar file.
</center><br></p>

<p>More concerning in this particular case is that some professors often compile and execute the student&rsquo;s code <strong>in their computers</strong> with a series of tests to check the expected behaviour of the submissions. As you can see, the attack surface is just huge.</p>

<h1 id="conclusions-references">Conclusions + References</h1>

<p>A plain Google search shows that this laboratory practice has been in use for several years at the faculty. It has been reviewed by a plethora of professors too, but this specification design problem has not been addressed.</p>

<p>In addition, .tar format is not the only compression format affected, as .zip files&rsquo; specification is equally flawed. It is old and <strong>wasn&rsquo;t created with security as a necessity</strong>.</p>

<p>If you want to know more about the history of these errors and exploits, which exist since 1991, check out the following video. Also covers other vulns like the ones with symlinks:</p>

<p><center>
<iframe width="420" height="315" src="https://www.youtube.com/embed/Ry_yb5Oipq0" frameborder="0" allowfullscreen></iframe><br>
Zip Vulnerabilities.
</center></p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'>
  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/devblog/rhmefaultinjection/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Solving rhme fiesta from Riscure Hardware CTF 2016 with EM Fault Injection</a>
    </div></div>
</nav>


<section id='comments' class='comments'>
  <div class='container sep-before'>
    <div class='comments-area'><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "pjplayground" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
  </div>
</section>

      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/pedro-javierf' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='https://twitter.com/DanglingPointr' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Twitter account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>
</a>
      </li><li>
        <a href='https://linkedin.com/in/pedro-javier-fern%c3%a1ndez-29a998101' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Linkedin account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
  <rect x="2" y="9" width="4" height="12"/>
  <circle cx="4" cy="4" r="2"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p> &copy; 2017-2020  </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/assets/js/"</script>

<script src='/assets/js/main.c3bcf2df.js'></script><script src='/js/custom.js'></script>

</body>

</html>

